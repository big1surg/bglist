<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" >
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>

<style>

.col{
 padding: 10px 10px 10px 10px;
}

.jumbotron{
	background-image: url("background.jpg");
	background-size: cover;
}

	
/* The flip box container - set the width and height to whatever you want. We have added the border property to demonstrate that the flip itself goes out of the box on hover (remove perspective if you don't want the 3D effect */
.flip-box {
  background-color: transparent;
  width: 150px;
  height: 150px;
  /*perspective: 1000px; /* Remove this if you don't want the 3D effect */
}

/* This container is needed to position the front and back side */
.flip-box-inner {
  position: relative;
  width: 100%;
  height: 100%;
  text-align: center;
  transition: transform 0.8s;
  transform-style: preserve-3d;
}

/* Do an horizontal flip when you move the mouse over the flip box container */
.flip-box:hover .flip-box-inner {
  transform: rotateY(180deg);
}

/* Position the front and back side */
.flip-box-front, .flip-box-back {
  position: absolute;
  width: 100%;
  height: 100%;
  -webkit-backface-visibility: hidden; /* Safari */
  backface-visibility: hidden;
}

/* Style the front side (fallback if image is missing) */
.flip-box-front {
  background-color: #bbb;
  color: black;
}

/* Style the back side */
.flip-box-back {
  background-color: white;
  color: black;
 border: 1px solid black;
  transform: rotateY(180deg);
  opacity: 0.8;
}	
	


	
</style>
</head>
<body>

<!-- Content will go here -->
<div class="container-fluid">

<div class="jumbotron">
  <h1 class="display-4 text-white">Board Games</h1>
  <p class="lead text-white">Showcasing your Collection.</p>
  <a class="btn btn-light" href="index.html">Home</a>
  <a class="btn btn-light" href="mygames.html">Users</a>
  <a class="btn btn-light" href="getplays.html">Plays</a>
  <a class="btn btn-light" href="doessomeownit.html">Own</a>
</div>
</div>
<div id="buttonGroup" style="margin: 20px;">
	<div class="form-group" >
  		<label style="width:95%;" >Person 1 BGG Username<input class="form-control" list="bggPeople" name="myBggPeople" id="usernameInput" style="width:100%;" /></label>
		<datalist id="bggPeople" style="width:100%;" >
		  <option value="biggy_serg">Sergio</option>
		  <option value="sasurai087">James</option>
		  <option value="daftprince">Princeton</option>
		  <option value="dmirman">David Mirman</option>
		  <option value="lawster">Christina Law</option>
		  <option value="rckhopr">Josh</option>
		  <option value="ahlonzie">Katie</option>
		  <option value="chaincranker">Andy</option>
		</datalist><br/><hr/>
	</div>
	<div class="form-group" >
  		<label style="width:95%;" >Person 2 BGG Username<input class="form-control" list="bggPeople2" name="myBggPeople2" id="usernameInput2" style="width:100%;" /></label>
		<datalist id="bggPeople2" style="width:100%;" >
		  <option value="biggy_serg">Sergio</option>
		  <option value="sasurai087">James</option>
		  <option value="daftprince">Princeton</option>
		  <option value="dmirman">David Mirman</option>
		  <option value="lawster">Christina Law</option>
		  <option value="rckhopr">Josh</option>
		  <option value="ahlonzie">Katie</option>
		  <option value="chaincranker">Andy</option>
		</datalist><br/><hr/>
	</div>
	<br/>
	<button type="submit" class="btn btn-primary" onclick="letsDoThis()">Submit</button>
	<button class="btn btn-warning" onclick="clearInputUser()">Clear Users</button>
</div>
<div class="container" id='mainBox'>	
</div> <!---container-->
</body>
</html>
	  
<script>
//different array of games
var accessToken = 'a655a94f-3190-4881-adee-2acf39890ceb';
var urlinput = '';
var arrayAllGames= new Array();
var arrayOfDupes = new Array();
var name1= '';
var name2 = '';
var count;

function letsDoThis(){
	count = 0;
	arrayAllGames= new Array();
	arrayOfDupes = new Array();
	var userinput = document.getElementById("usernameInput").value;
	var userinput2 = document.getElementById("usernameInput2").value;
	name1 = userinput;
	name2 = userinput2;
	

	urlInput="https://boardgamegeek.com/xmlapi2/collection?%20username="+userinput+"&own=1&excludesubtype=boardgameexpansion&stats=0";
	document.getElementById("mainBox").innerHTML = "";
	console.log(urlInput);
	loadDoc(urlInput);	
	urlInput="https://boardgamegeek.com/xmlapi2/collection?%20username="+userinput2+"&own=1&excludesubtype=boardgameexpansion&stats=0";
	console.log(urlInput);
	loadDoc(urlInput);
}

function loadDoc(urlString) {
  var xhttp = new XMLHttpRequest();
  xhttp.open("GET", urlString, true);
  xhttp.setRequestHeader("Authorization", " Bearer "+accessToken);
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      myFunction(this);
    }
  };
  xhttp.send();
}

function myFunction(xml) {
	var name;
	var i;
	var xmlDoc = xml.responseXML;
	  //var table="<tr><th>Artist</th><th>Title</th></tr>";
	  var x = xmlDoc.getElementsByTagName("item");

	  for(i=0; i<x.length; i++){
		name = x[i].getElementsByTagName("name")[0].textContent;
		arrayAllGames.indexOf(name) === -1 ? arrayAllGames.push(name) : arrayOfDupes.push(name);
		
	  }
	  
	  displayResults(arrayOfDupes);
}


function displayResults(arrayOfGames){
	var games = arrayOfGames.length;
		var div = document.createElement('div');
	if(count == 1){
		div.innerHTML = `
		<h3>${name1} and ${name2} have ${arrayOfGames.length} duplicates</h3>
		`;
	}
	
	document.getElementById('mainBox').appendChild(div);
	for(y=0;y<games;y++){
		div.innerHTML += `
		${arrayOfGames[y]}<br/>
		`;
		document.getElementById('mainBox').appendChild(div);
	}
	
	count++;
	
}

function clearInputUser(){
	document.getElementById("usernameInput").value = '';
	document.getElementById("usernameInput2").value = '';
}

</script>
